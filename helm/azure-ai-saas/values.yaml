# 기본 설정
replicaCount: 2

# 이미지 설정
image:
  repository: skaxdev.azurecr.io/azure-ai-saas
  pullPolicy: Always
  tag: "latest"

# 이미지 Pull Secrets (ACR 인증)
imagePullSecrets: []
# 예시:
# imagePullSecrets:
#   - name: acr-secret

# 서비스 설정
service:
  type: ClusterIP
  port: 80
  targetPort: 8080

# 리소스 설정
resources:
  requests:
    memory: "64Mi"
    cpu: "100m"
  limits:
    memory: "128Mi"
    cpu: "200m"

# 보안 컨텍스트
securityContext:
  runAsNonRoot: true
  runAsUser: 101
  fsGroup: 101
  seccompProfile:
    type: RuntimeDefault

containerSecurityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 101
  capabilities:
    drop:
    - ALL

# Health Check
livenessProbe:
  httpGet:
    path: /health
    port: 8080
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  successThreshold: 1
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /health
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 3
  successThreshold: 1
  failureThreshold: 3

# 배포 전략
strategy:
  type: RollingUpdate
  rollingUpdate:
    maxSurge: 1
    maxUnavailable: 0

# ConfigMap
configMap:
  enabled: true
  data:
    APP_ENV: "production"
    LOG_LEVEL: "info"
    APP_NAME: "Azure AI SaaS"

# Nginx ConfigMap (nginx.conf를 ConfigMap으로 관리)
nginxConfigMap:
  enabled: true

# Envoy Gateway HTTPRoute
httpRoute:
  enabled: true
  hostname: ""  # 선택사항: 도메인 설정
  path: "/"
  pathType: PathPrefix

# 노드 선택자 (선택사항)
nodeSelector: {}

# 톨러레이션 (선택사항)
tolerations: []

# 어피니티 (선택사항)
affinity: {}

# HPA 설정 (선택사항)
autoscaling:
  enabled: false
  minReplicas: 2
  maxReplicas: 5
  targetCPUUtilizationPercentage: 60
  targetMemoryUtilizationPercentage: 80

